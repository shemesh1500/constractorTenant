{"version":3,"sources":["../../../shared/containers/Box/config.js","../../../shared/containers/Box/helperfunc.js","../../../shared/containers/Box/GridLayout.js"],"names":["layoutConfig","className","autoSize","verticalCompact","cols","lg","md","sm","xs","xxs","breakpoints","draggableHandle","isResizable","rowHeight","margin","gutter","indexOfBoxfunc","allBox","uid","boxIndex","forEach","box","index","toString","deleteBox","boxActions","saveBox","ResponsiveReactGridLayout","WidthProvider","Responsive","GridLayout","props","onLayoutChange","bind","breakPointChange","autoHeight","state","breakpoint","this","setState","nextProps","reload","layouts","layout","i","x","y","h","w","size","newBreakpoint","height","self","map","singleBox","indexOfBox","Math","ceil","setTimeout","Layouts","mdLayouts","lgLayouts","smLayouts","xsLayouts","xxsLayouts","push","parseInt","generateLayoutfunc","boxSettings","onDragStop","onResizeStop","onBreakpointChange","key","debounceTimeout","onResize","data","style","paddingRight","paddingBottom","title","onClick","type","content","reactComponent","Component","connect","Box"],"mappings":"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","file":"static/js/123.862fb6eb.chunk.js","sourcesContent":["const layoutConfig = {\n  className: 'isoCardBoxLayout',\n  autoSize: true,\n  verticalCompact: true,\n  cols: { lg: 96, md: 96, sm: 96, xs: 96, xxs: 96 },\n  breakpoints: { lg: 1200, md: 996, sm: 768, xs: 480, xxs: 200 },\n  draggableHandle: '.isoDragBox',\n  isResizable: true,\n  rowHeight: 1,\n  margin: [0, 0],\n};\n\nconst gutter = {\n  gutterWidth: 10,\n  gutterHeight: 10,\n};\nexport { layoutConfig, gutter };\n","const generateLayoutfunc = allBox => {\n  const mdLayouts = [];\n  const lgLayouts = [];\n  const smLayouts = [];\n  const xsLayouts = [];\n  const xxsLayouts = [];\n  allBox.forEach(box => {\n    mdLayouts.push({\n      ...box,\n      x: parseInt(box.size.md.x, 10),\n      y: parseInt(box.size.md.y, 10),\n      h: parseInt(box.size.md.h, 10),\n      w: parseInt(box.size.md.w, 10),\n      i: box.size.md.i.toString(),\n    });\n    lgLayouts.push({\n      ...box,\n      x: parseInt(box.size.lg.x, 10),\n      y: parseInt(box.size.lg.y, 10),\n      h: parseInt(box.size.lg.h, 10),\n      w: parseInt(box.size.lg.w, 10),\n      i: box.size.lg.i.toString(),\n    });\n    smLayouts.push({\n      ...box,\n      x: parseInt(box.size.sm.x, 10),\n      y: parseInt(box.size.sm.y, 10),\n      h: parseInt(box.size.sm.h, 10),\n      w: parseInt(box.size.sm.w, 10),\n      i: box.size.sm.i.toString(),\n    });\n    xsLayouts.push({\n      ...box,\n      x: parseInt(box.size.xs.x, 10),\n      y: parseInt(box.size.xs.y, 10),\n      h: parseInt(box.size.xs.h, 10),\n      w: parseInt(box.size.xs.w, 10),\n      i: box.size.xs.i.toString(),\n    });\n    xxsLayouts.push({\n      ...box,\n      x: parseInt(box.size.xxs.x, 10),\n      y: parseInt(box.size.xxs.y, 10),\n      h: parseInt(box.size.xxs.h, 10),\n      w: parseInt(box.size.xxs.w, 10),\n      i: box.size.xxs.i.toString(),\n    });\n  });\n  return {\n    md: mdLayouts,\n    lg: lgLayouts,\n    sm: smLayouts,\n    xs: xsLayouts,\n    xxs: xxsLayouts,\n  };\n};\n\nconst indexOfBoxfunc = (allBox, uid) => {\n  let boxIndex = -1;\n  allBox.forEach((box, index) => {\n    if (box.uid.toString() === uid.toString()) {\n      boxIndex = index;\n    }\n  });\n  return boxIndex;\n};\n\nexport { generateLayoutfunc, indexOfBoxfunc };\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Responsive, WidthProvider } from 'react-grid-layout';\nimport { ReactElementResize } from 'react-element-resize';\nimport { Icon } from 'antd';\nimport boxActions from '@iso/redux/box/actions';\nimport { layoutConfig, gutter } from './config';\nimport { generateLayoutfunc, indexOfBoxfunc } from './helperfunc';\nimport 'react-grid-layout/css/styles.css';\nimport 'react-resizable/css/styles.css';\nimport './box.css';\n\nconst { deleteBox, saveBox } = boxActions;\nconst ResponsiveReactGridLayout = WidthProvider(Responsive);\n\nclass GridLayout extends Component {\n  constructor(props) {\n    super(props);\n    this.onLayoutChange = this.onLayoutChange.bind(this);\n    this.breakPointChange = this.breakPointChange.bind(this);\n    this.autoHeight = this.autoHeight.bind(this);\n    this.state = {\n      breakpoint: 'lg',\n    };\n  }\n  componentWillMount() {\n    this.setState({ allBox: this.props.allBox });\n  }\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.reload) {\n      this.setState({ allBox: nextProps.allBox });\n    }\n  }\n  onLayoutChange(layouts) {\n    const { allBox } = this.state;\n    layouts.forEach(layout => {\n      const boxIndex = indexOfBoxfunc(allBox, layout.i);\n      if (boxIndex !== -1) {\n        const { x, y, h, w, i } = layout;\n        allBox[boxIndex].size[this.state.breakpoint] = { x, y, h, w, i };\n      }\n    });\n    this.setState({ allBox });\n    this.props.saveBox(allBox);\n  }\n  breakPointChange(newBreakpoint) {\n    // this.breakpoint = newBreakpoint;\n    this.setState({ breakpoint: newBreakpoint });\n    // Device type can be accesssed from this.breakpoint variable\n  }\n  autoHeight(uid, { height }) {\n    const { allBox, breakpoint } = this.state;\n    const self = this;\n    if (height === 0) {\n      return;\n    }\n    allBox.map(singleBox => {\n      const indexOfBox = indexOfBoxfunc(allBox, uid);\n      if (\n        allBox[indexOfBox].size[breakpoint].h !==\n        Math.ceil(height / layoutConfig.rowHeight)\n      ) {\n        allBox[indexOfBox].size[breakpoint].h = Math.ceil(\n          height / layoutConfig.rowHeight\n        );\n      }\n      return null;\n    });\n    setTimeout(() => {\n      self.setState({ allBox });\n    }, 1);\n  }\n  render() {\n    const { allBox } = this.state;\n    const { deleteBox } = this.props;\n    const Layouts = generateLayoutfunc(allBox);\n    const renderBox = singleBox => {\n      return (\n        <div className=\"isomorphicSingleCardHolder\" key={singleBox.i}>\n          <ReactElementResize\n            debounceTimeout={200}\n            onResize={data => {\n              this.autoHeight(singleBox.i, data);\n            }}\n          >\n            {data => (\n              <div\n                className=\"isomorphicSingleCard\"\n                style={{\n                  paddingRight: `${Math.ceil(gutter.gutterWidth)}px`,\n                  paddingBottom: `${Math.ceil(gutter.gutterHeight)}px`,\n                }}\n              >\n                <div className=\"isoCardBox\">\n                  <div className=\"isoCardBoxHeader\">\n                    <h3>{singleBox.title}</h3>\n\n                    <div className=\"isoCardControl\">\n                      <button\n                        className=\"isoDeleteBtn\"\n                        onClick={() => deleteBox(singleBox.i)}\n                      >\n                        <Icon type=\"delete\" />\n                      </button>\n                      <button className=\"isoDragBox\" type=\"button\">\n                        <Icon type=\"swap\" />\n                      </button>\n                    </div>\n                  </div>\n\n                  <div className=\"isoCardBoxBody\">\n                    <p>{singleBox.content}</p>\n                    {singleBox.reactComponent ? (\n                      <singleBox.reactComponent />\n                    ) : null}\n                  </div>\n                </div>\n              </div>\n            )}\n          </ReactElementResize>\n        </div>\n      );\n    };\n    const boxSettings = {\n      ...layoutConfig,\n      layouts: Layouts,\n      onDragStop: this.onLayoutChange,\n      onResizeStop: this.onLayoutChange,\n      onBreakpointChange: this.breakPointChange,\n    };\n    return (\n      <div className=\"isoCardBoxContentWrapper\">\n        <ResponsiveReactGridLayout {...boxSettings}>\n          {Layouts.md.map(renderBox)}\n        </ResponsiveReactGridLayout>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    allBox: state.Box.allBox,\n    reload: state.Box.reload,\n  };\n}\nexport default connect(\n  mapStateToProps,\n  {\n    saveBox,\n    deleteBox,\n  }\n)(GridLayout);\n"],"sourceRoot":""}